---
title: Installation Guide
description: Complete guide for installing Cortex on all supported platforms
sidebar:
  badge: New
---

import { Tabs, TabItem } from '@astrojs/starlight/components';
import { Aside } from '@astrojs/starlight/components';

# Installing Cortex

This comprehensive guide covers installation instructions for all supported platforms: Windows, macOS, Linux, and Docker.

## Minimum Requirements

Before installing Cortex, ensure your system meets these requirements:

### Operating Systems
- **Windows**: Windows 10 or later
- **macOS**: macOS 12 (Monterey) or later
- **Linux**: Ubuntu 20.04+, Debian 11+, or latest Arch Linux
  - Other distributions may work with Docker or binary files

### Hardware Requirements

#### CPU
<Aside>
Cortex works best with processors supporting AVX2 instructions. We support older processors with AVX, AVX-512, and non-AVX, though performance will be reduced.
</Aside>

- **Intel**: Haswell (Q2 2013) or newer; Tiger Lake (Q3 2020)+ for Celeron/Pentium
- **AMD**: Excavator (Q2 2015) or newer

#### RAM
- **8GB**: Up to 3B parameter models (int4 quantization)
- **16GB**: Up to 7B parameter models (int4 quantization)
- **32GB**: Up to 13B parameter models (int4 quantization)

#### GPU (Optional)
<Aside>
Having at least 6GB VRAM when using NVIDIA, AMD, or Intel Arc GPUs is recommended for optimal performance.
</Aside>

- **6GB VRAM**: 3B parameter models (int4) with full-speed inference
- **8GB VRAM**: 7B parameter models (int4) with full-speed inference
- **12GB VRAM**: 13B parameter models (int4) with full-speed inference

**NVIDIA Requirements**:
- NVIDIA driver 470.63.01+
- CUDA Toolkit 12.0+ (Cortex will automatically install required CUDA runtime)

#### Storage
- At least 10GB free space for models

## Installation Options

Cortex offers four installation methods:
- **Network Installers**: Minimal downloaders that fetch packages during installation (requires internet)
- **Local Installers**: Complete packages for offline installation
- **Docker Images**: Pre-built containers or build-it-yourself options
- **Binary Files**: Direct executable files without package management

## Download Links

| Platform | Stable Release | Beta Release | Nightly Build |
|----------|---------------|--------------|---------------|
| Windows | [Download](https://app.cortexcpp.com/download/latest/windows-amd64-local) | [Download](https://app.cortexcpp.com/download/beta/windows-amd64-local) | [Download](https://app.cortexcpp.com/download/nightly/windows-amd64-local) |
| macOS | [Download](https://app.cortexcpp.com/download/latest/mac-universal-local) | [Download](https://app.cortexcpp.com/download/beta/mac-universal-local) | [Download](https://app.cortexcpp.com/download/nightly/mac-universal-local) |
| Linux | [Download](https://app.cortexcpp.com/download/latest/linux-amd64-local) | [Download](https://app.cortexcpp.com/download/beta/linux-amd64-local) | [Download](https://app.cortexcpp.com/download/nightly/linux-amd64-local) |

<Aside>
For additional download options and specific versions, visit the [official Cortex repository](https://github.com/menloresearch/cortex.cpp/releases).
</Aside>

## Platform-Specific Instructions

<Tabs>
  <TabItem value="windows" label="Windows">
    ### Windows Installation

    1. **Download the installer** from the links above
    2. **Run the installer** by double-clicking the downloaded file
    3. **Follow the installation wizard** to complete setup
    4. **Verify installation** by opening a command prompt and running:
       ```cmd
       cortex -v
       ```

    #### Installation Locations
    - **Binary**: `C:\Users\<username>\AppData\Local\cortexcpp\`
    - **Data**: `C:\Users\<username>\cortexcpp`
    - **Config**: `C:\Users\<username>\.cortexrc`

    #### Uninstall
    1. Open Control Panel
    2. Navigate to "Add or Remove Programs"/"Programs and Features"
    3. Find "cortexcpp" and select "Uninstall"

    #### Windows Subsystem for Linux (WSL)
    If you prefer running Cortex in WSL, follow the Linux installation instructions after setting up WSL.
  </TabItem>

  <TabItem value="mac" label="macOS">
    ### macOS Installation

    1. **Download the installer package** from the links above
    2. **Open the downloaded .pkg file** by double-clicking it
    3. **Follow the installation wizard** to complete setup
    4. **Verify installation** by opening Terminal and running:
       ```bash
       cortex -v
       ```

    #### Installation Locations
    - **Binary**: `/usr/local/bin/cortex`, `/usr/local/bin/cortex-server`
    - **Data**: `/Users/<username>/cortexcpp`
    - **Config**: `/Users/<username>/.cortexrc`
    - **Uninstaller**: `/usr/local/bin/cortex-uninstall.sh`

    #### Uninstall
    Run the uninstaller script:
    ```bash
    sudo sh /usr/local/bin/cortex-uninstall.sh
    ```
  </TabItem>

  <TabItem value="linux" label="Linux">
    ### Linux Installation

    #### Quick Install (Network Installer)
    ```bash
    curl -s https://raw.githubusercontent.com/menloresearch/cortex/main/engine/templates/linux/install.sh | sudo bash -s
    ```

    #### Local Installer (Debian-based distros)
    ```bash
    curl -s https://raw.githubusercontent.com/menloresearch/cortex/main/engine/templates/linux/install.sh | sudo bash -s -- --deb_local
    ```

    #### Additional Options
    - `--channel <channel_name>`: Install from `stable`, `beta` or `nightly` channel
    - `--version <version>`: Install specific version (e.g., `1.0.2`)
    - `--is_update`: Flag for updating existing installation

    #### Verify Installation
    ```bash
    cortex -v
    ```

    #### Installation Locations
    - **Binary**: `/usr/bin/cortex`, `/usr/bin/cortex-server`
    - **Data**: `/home/<username>/cortexcpp`
    - **Config**: `/home/<username>/.cortexrc`

    #### Uninstall
    ```bash
    sudo /usr/bin/cortex-uninstall.sh
    ```
  </TabItem>

  <TabItem value="docker" label="Docker">
    ### Docker Installation

    #### Prerequisites
    - [Docker](https://docs.docker.com/engine/install/) v20.10.0+ or [Docker Desktop](https://docs.docker.com/desktop/)
    - For GPU support: `nvidia-container-toolkit` (see setup instructions below)

    #### GPU Support Setup (Ubuntu example)
    ```bash
    # Install NVIDIA Container Toolkit
    curl -fsSL https://nvidia.github.io/libnvidia-container/gpgkey | sudo gpg --dearmor -o /usr/share/keyrings/nvidia-container-toolkit-keyring.gpg

    # Add repository
    curl -s -L https://nvidia.github.io/libnvidia-container/stable/deb/nvidia-container-toolkit.list | \
      sed 's#deb https://#deb [signed-by=/usr/share/keyrings/nvidia-container-toolkit-keyring.gpg] https://#g' | \
      sudo tee /etc/apt/sources.list.d/nvidia-container-toolkit.list

    # Install
    sudo apt-get update && sudo apt-get install -y nvidia-container-toolkit
    sudo nvidia-ctk runtime configure --runtime=docker
    sudo systemctl restart docker
    ```

    #### Option 1: Using Pre-built Image
    ```bash
    # Pull the latest stable release
    docker pull menloltd/cortex:latest

    # Or a specific version (recommended for production)
    docker pull menloltd/cortex:nightly-1.0.1-224
    ```

    #### Option 2: Building from Source
    ```bash
    git clone https://github.com/menloresearch/cortex.cpp.git
    cd cortex.cpp
    git submodule update --init

    # Build with latest
    docker build -t menloltd/cortex:local \
      --build-arg CORTEX_CPP_VERSION=$(git rev-parse HEAD) \
      -f docker/Dockerfile .

    # Or with specific version
    docker build \
      --build-arg CORTEX_LLAMACPP_VERSION=0.1.34 \
      --build-arg CORTEX_CPP_VERSION=$(git rev-parse HEAD) \
      -t menloltd/cortex:local \
      -f docker/Dockerfile .
    ```

    #### Running Cortex in Docker

    1. **Create data volume**
    ```bash
    docker volume create cortex_data
    ```

    2. **Launch container**

    For GPU mode:
    ```bash
    docker run --gpus all -d \
      --name cortex \
      --memory=4g \
      --memory-swap=4g \
      --security-opt=no-new-privileges \
      -v cortex_data:/root/cortexcpp:rw \
      -v /opt/cortex/data:/data:rw \
      -p 127.0.0.1:39281:39281 \
      menloltd/cortex:latest
    ```

    For CPU mode:
    ```bash
    docker run -d \
      --name cortex \
      --memory=4g \
      --memory-swap=4g \
      --security-opt=no-new-privileges \
      -v cortex_data:/root/cortexcpp:rw \
      -v /opt/cortex/data:/data:rw \
      -p 127.0.0.1:39281:39281 \
      menloltd/cortex:latest
    ```

    3. **Verify container**
    ```bash
    docker ps | grep cortex
    docker logs cortex
    curl http://127.0.0.1:39281/healthz
    ```
  </TabItem>
</Tabs>

## Building from Source

<Tabs>
  <TabItem value="windows-build" label="Windows">
    ### Windows Build

    #### Prerequisites
    - CMake 3.10+
    - Visual Studio 2019/2022 with MSVC
    - ninja-build
    - make-gnu

    #### Build Steps
    ```cmd
    git clone https://github.com/menloresearch/cortex.cpp.git
    cd cortex.cpp
    git submodule update --init

    cd engine
    make configure-vcpkg
    make build CMAKE_EXTRA_FLAGS="-DCORTEX_CPP_VERSION=latest -DCMAKE_BUILD_TEST=OFF -DBUILD_SHARED_LIBS=OFF -DCMAKE_TOOLCHAIN_FILE=vcpkg\\scripts\\buildsystems\\vcpkg.cmake -DVCPKG_TARGET_TRIPLET=x64-windows-static -DCMAKE_BUILD_TYPE=RELEASE -GNinja"

    # Test the build
    .\build\cortex.exe -h
    ```
  </TabItem>

  <TabItem value="mac-build" label="macOS">
    ### macOS Build

    #### Prerequisites
    - CMake 3.10+
    - gcc/g++ 9+
    - ninja-build
    - make-gnu

    #### Build Steps
    ```bash
    git clone https://github.com/menloresearch/cortex.cpp.git
    cd cortex.cpp
    git submodule update --init

    cd engine
    make configure-vcpkg

    # For Mac Silicon (M1/M2)
    make build CMAKE_EXTRA_FLAGS="-DCORTEX_CPP_VERSION=latest -DCMAKE_BUILD_TEST=OFF -DMAC_ARM64=ON -DCMAKE_TOOLCHAIN_FILE=vcpkg/scripts/buildsystems/vcpkg.cmake"

    # For Mac Intel
    make build CMAKE_EXTRA_FLAGS="-DCORTEX_CPP_VERSION=latest -DCMAKE_BUILD_TEST=OFF -DCMAKE_TOOLCHAIN_FILE=vcpkg/scripts/buildsystems/vcpkg.cmake"

    # Test the build
    ./build/cortex -h
    ```
  </TabItem>

  <TabItem value="linux-build" label="Linux">
    ### Linux Build

    #### Prerequisites
    - OpenMPI
    - CMake 3.10+
    - gcc/g++ 9+
    - ninja-build
    - make-gnu

    #### Build Steps
    ```bash
    git clone https://github.com/menloresearch/cortex.cpp.git
    cd cortex.cpp
    git submodule update --init

    cd engine
    make configure-vcpkg
    make build CMAKE_EXTRA_FLAGS="-DCORTEX_CPP_VERSION=$(git rev-parse HEAD) -DCMAKE_BUILD_TEST=OFF -DCMAKE_TOOLCHAIN_FILE=vcpkg/scripts/buildsystems/vcpkg.cmake"

    # Test the build
    ./build/cortex -h
    ```
  </TabItem>
</Tabs>

## Updating Cortex

<Tabs>
  <TabItem value="windows-update" label="Windows">
    ```cmd
    cortex.exe update
    ```
  </TabItem>

  <TabItem value="mac-update" label="macOS">
    ```bash
    sudo cortex update
    ```
  </TabItem>

  <TabItem value="linux-update" label="Linux">
    ```bash
    sudo cortex update
    ```
  </TabItem>

  <TabItem value="docker-update" label="Docker">
    ```bash
    # Pull latest image
    docker pull menloltd/cortex:latest

    # Stop and remove existing container
    docker stop cortex
    docker rm cortex

    # Start a new container (use the same run command as for installation)
    ```
  </TabItem>
</Tabs>

## Working with Cortex

After installing Cortex, you can start using it immediately. Here's how to perform common tasks:

### Using Cortex in Docker

#### 1. Check Available Engines
```bash
curl --request GET --url http://localhost:39281/v1/engines \
  --header "Content-Type: application/json"
```

#### 2. Download Models
First, monitor events:
```bash
websocat ws://localhost:39281/events
```

Then download a model:
```bash
curl --request POST --url http://localhost:39281/v1/models/pull \
  --header 'Content-Type: application/json' \
  --data '{"model": "tinyllama:gguf"}'
```

#### 3. Start and Use a Model
```bash
# Start model
curl --request POST --url http://localhost:39281/v1/models/start \
  --header 'Content-Type: application/json' \
  --data '{"model": "tinyllama:gguf"}'

# Query the model
curl --request POST --url http://localhost:39281/v1/chat/completions \
  --header 'Content-Type: application/json' \
  --data '{
    "frequency_penalty": 0.2,
    "max_tokens": 4096,
    "messages": [{"content": "Tell me a joke", "role": "user"}],
    "model": "tinyllama:gguf",
    "presence_penalty": 0.6,
    "stop": ["End"],
    "stream": true,
    "temperature": 0.8,
    "top_p": 0.95
  }'
```

## Troubleshooting

### Common Issues

#### Permission Errors on Linux/macOS
```bash
# Fix permissions for data directory
sudo chown -R $(whoami):$(whoami) ~/cortexcpp
```

#### Docker Container Won't Start
```bash
docker logs cortex
docker system info  # Check available resources
```

#### GPU Not Detected
- Ensure NVIDIA drivers are properly installed
- Verify CUDA Toolkit installation
- For Docker: check that nvidia-container-toolkit is configured correctly

## Release Channels

Cortex offers three release channels:

- **Stable**: Latest released version, recommended for most users
- **Beta**: Release candidates for upcoming stable versions (tagged as `vx.y.z-rc1` on GitHub)
- **Nightly**: Latest development builds from the dev branch (available on [Discord](https://discord.com/channels/1107178041848909847/1283654073488379904))

Different channels use different naming conventions and file locations:

| Channel | App Name | Binary Name (Linux/Mac) | Binary Name (Windows) |
|---------|----------|-------------------------|----------------------|
| Stable | `cortexcpp` | `cortex`, `cortex-server` | `cortex.exe`, `cortex-server.exe` |
| Beta | `cortexcpp-beta` | `cortex-beta`, `cortex-server-beta` | `cortex-beta.exe`, `cortex-server-beta.exe` |
| Nightly | `cortexcpp-nightly` | `cortex-nightly`, `cortex-server-nightly` | `cortex-nightly.exe`, `cortex-server-nightly.exe` |

<Aside>
For production use, we strongly recommend using the stable channel with specific version tags.
</Aside>
