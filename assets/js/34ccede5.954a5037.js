"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5097],{11610:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>p,frontMatter:()=>r,metadata:()=>a,toc:()=>d});var i=t(85893),o=t(11151);const r={title:"Nitro with openai-python",description:"Nitro intergration guide for Python.",keywords:["Nitro","Jan","fast inference","inference server","local AI","large language model","OpenAI compatible","open source","llama"]},s=void 0,a={id:"examples/openai-python",title:"Nitro with openai-python",description:"Nitro intergration guide for Python.",source:"@site/docs/examples/openai-python.md",sourceDirName:"examples",slug:"/examples/openai-python",permalink:"/examples/openai-python",draft:!1,unlisted:!1,editUrl:"https://github.com/janhq/nitro/tree/main/docs/docs/examples/openai-python.md",tags:[],version:"current",lastUpdatedBy:"automaticcat",lastUpdatedAt:1706927510,formattedLastUpdatedAt:"Feb 3, 2024",frontMatter:{title:"Nitro with openai-python",description:"Nitro intergration guide for Python.",keywords:["Nitro","Jan","fast inference","inference server","local AI","large language model","OpenAI compatible","open source","llama"]},sidebar:"docsSidebar",previous:{title:"Nitro with openai-node",permalink:"/examples/openai-node"},next:{title:"Nitro on Google Colab",permalink:"/examples/colab"}},c={},d=[{value:"Chat Completion",id:"chat-completion",level:2},{value:"Embedding",id:"embedding",level:2},{value:"Audio",id:"audio",level:2},{value:"How to reproduce",id:"how-to-reproduce",level:2}];function l(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"You can migrate from OAI API or Azure OpenAI to Nitro using your existing Python code quickly"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.strong,{children:"ONLY"})," thing you need to do is to override ",(0,i.jsx)(n.code,{children:"baseURL"})," in ",(0,i.jsx)(n.code,{children:"openai"})," init with ",(0,i.jsx)(n.code,{children:"Nitro"})," URL"]}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Python OpenAI SDK: ",(0,i.jsx)(n.a,{href:"https://pypi.org/project/openai/",children:"https://pypi.org/project/openai/"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"chat-completion",children:"Chat Completion"}),"\n",(0,i.jsxs)("table",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:" Engine "}),(0,i.jsx)("td",{children:" Python Code "})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:" Nitro "}),(0,i.jsx)("td",{children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import asyncio\n\nfrom openai import AsyncOpenAI\n\n# gets API Key from environment variable OPENAI_API_KEY\nclient = AsyncOpenAI(\n    base_url="http://localhost:3928/v1/",\n    api_key="sk-xxx"\n)\n\n\nasync def main() -> None:\n    stream = await client.chat.completions.create(\n        model="gpt-4",\n        messages=[{"role": "user", "content": "Say this is a test"}],\n        stream=True,\n    )\n    async for completion in stream:\n        print(completion.choices[0].delta.content, end="")\n    print()\n\nasyncio.run(main())\n'})})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:" OAI "}),(0,i.jsx)("td",{children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import asyncio\n\nfrom openai import AsyncOpenAI\n\n# gets API Key from environment variable OPENAI_API_KEY\nclient = AsyncOpenAI(api_key="sk-xxx")\n\n\nasync def main() -> None:\n    stream = await client.chat.completions.create(\n        model="gpt-4",\n        messages=[{"role": "user", "content": "Say this is a test"}],\n        stream=True,\n    )\n    async for completion in stream:\n        print(completion.choices[0].delta.content, end="")\n    print()\n\nasyncio.run(main())\n'})})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:" Azure OAI "}),(0,i.jsx)("td",{children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'from openai import AzureOpenAI\n\nopenai.api_key = \'...\' # Default is AZURE_OPENAI_API_KEY\n\nstream = AzureOpenAI(\n    api_version=api_version,\n    azure_endpoint="https://example-endpoint.openai.azure.com",\n)\n\ncompletion = client.chat.completions.create(\n    model="deployment-name",  # e.g. gpt-35-instant\n    messages=[{"role": "user", "content": "Say this is a test"}],\n    stream=True,\n)\nfor part in stream:\n    print(part.choices[0].delta.content or "")\n'})})})]})]}),"\n",(0,i.jsx)(n.h2,{id:"embedding",children:"Embedding"}),"\n",(0,i.jsxs)("table",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:" Engine "}),(0,i.jsx)("td",{children:" Embedding "})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:" Nitro "}),(0,i.jsx)("td",{children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import asyncio\n\nfrom openai import AsyncOpenAI\n\n# gets API Key from environment variable OPENAI_API_KEY\nclient = AsyncOpenAI(base_url=\"http://localhost:3928/v1/\",\n                     api_key=\"sk-xxx\")\n\n\nasync def main() -> None:\n    embedding = await client.embeddings.create(\n        input='Hello How are you?', \n        model='text-embedding-ada-002'\n    )\n    print(embedding)\n\nasyncio.run(main())\n"})})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:" OAI "}),(0,i.jsx)("td",{children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import asyncio\n\nfrom openai import AsyncOpenAI\n\n# gets API Key from environment variable OPENAI_API_KEY\nclient = AsyncOpenAI(api_key=\"sk-xxx\")\n\n\nasync def main() -> None:\n    embedding = await client.embeddings.create(\n        input='Hello How are you?',          \n        model='text-embedding-ada-002'\n    )\n    print(embedding)\n\nasyncio.run(main())\n"})})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:" Azure OAI "}),(0,i.jsx)("td",{children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import openai\n\nopenai.api_type = "azure"\nopenai.api_key = YOUR_API_KEY\nopenai.api_base = "https://YOUR_RESOURCE_NAME.openai.azure.com"\nopenai.api_version = "2023-05-15"\n\nresponse = openai.embedding.create(\n    input="Your text string goes here",\n    engine="YOUR_DEPLOYMENT_NAME"\n)\nembeddings = response[\'data\'][0][\'embedding\']\nprint(embeddings)\n'})})})]})]}),"\n",(0,i.jsx)(n.h2,{id:"audio",children:"Audio"}),"\n",(0,i.jsx)(n.admonition,{title:"Coming soon",type:"info"}),"\n",(0,i.jsx)(n.h2,{id:"how-to-reproduce",children:"How to reproduce"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Step 1:"})," Dependencies installation."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'title="Install OpenAI"',children:"pip install openai\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Step 2:"})," Fill ",(0,i.jsx)(n.code,{children:"index.py"})," file with code."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Step 3:"})," Run the code with ",(0,i.jsx)(n.code,{children:"python index.py"}),"."]})]})}function p(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},11151:(e,n,t)=>{t.d(n,{Z:()=>a,a:()=>s});var i=t(67294);const o={},r=i.createContext(o);function s(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);